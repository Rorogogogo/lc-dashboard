"use strict";var t,n,i={},o="object"==typeof Reflect?Reflect:null,r=o&&"function"==typeof o.apply?o.apply:function(t,n,i){return Function.prototype.apply.call(t,n,i)};t=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function l(){l.init.call(this)}i=l,i.once=function(t,n){return new Promise(function(i,o){function r(i){t.removeListener(n,s),o(i)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}b(t,n,s,{once:!0}),"error"!==n&&"function"==typeof t.on&&b(t,"error",r,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var a=10;function c(t){if("function"!=typeof t)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?l.defaultMaxListeners:t._maxListeners}function h(t,n,i,o){if(c(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",n,i.listener?i.listener:i),s=t._events),l=s[n]),void 0===l)l=s[n]=i,++t._eventsCount;else if("function"==typeof l?l=s[n]=o?[i,l]:[l,i]:o?l.unshift(i):l.push(i),(r=u(t))>0&&l.length>r&&!l.warned){l.warned=!0;var r,s,l,a=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=n,a.count=l.length,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(t,n,i){var o={fired:!1,wrapFn:void 0,target:t,type:n,listener:i},r=d.bind(o);return r.listener=i,o.wrapFn=r,r}function p(t,n,i){var o=t._events;if(void 0===o)return[];var r=o[n];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var n=Array(t.length),i=0;i<n.length;++i)n[i]=t[i].listener||t[i];return n}(r):f(r,r.length)}function m(t){var n=this._events;if(void 0!==n){var i=n[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(t,n){for(var i=Array(n),o=0;o<n;++o)i[o]=t[o];return i}function b(t,n,i,o){if("function"==typeof t.on)o.once?t.once(n,i):t.on(n,i);else if("function"==typeof t.addEventListener)t.addEventListener(n,function r(s){o.once&&t.removeEventListener(n,r),i(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||s(t))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),l.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},l.prototype.getMaxListeners=function(){return u(this)},l.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var o="error"===t,s=this._events;if(void 0!==s)o=o&&void 0===s.error;else if(!o)return!1;if(o){if(n.length>0&&(l=n[0]),l instanceof Error)throw l;var l,a=Error("Unhandled error."+(l?" ("+l.message+")":""));throw a.context=l,a}var c=s[t];if(void 0===c)return!1;if("function"==typeof c)r(c,this,n);else for(var u=c.length,h=f(c,u),i=0;i<u;++i)r(h[i],this,n);return!0},l.prototype.addListener=function(t,n){return h(this,t,n,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(t,n){return h(this,t,n,!0)},l.prototype.once=function(t,n){return c(n),this.on(t,g(this,t,n)),this},l.prototype.prependOnceListener=function(t,n){return c(n),this.prependListener(t,g(this,t,n)),this},l.prototype.removeListener=function(t,n){var i,o,r,s,l;if(c(n),void 0===(o=this._events)||void 0===(i=o[t]))return this;if(i===n||i.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,i.listener||n));else if("function"!=typeof i){for(r=-1,s=i.length-1;s>=0;s--)if(i[s]===n||i[s].listener===n){l=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}(i,r),1===i.length&&(o[t]=i[0]),void 0!==o.removeListener&&this.emit("removeListener",t,l||n)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(t){var n,i,o;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0==arguments.length){var r,s=Object.keys(i);for(o=0;o<s.length;++o)"removeListener"!==(r=s[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=i[t]))this.removeListener(t,n);else if(void 0!==n)for(o=n.length-1;o>=0;o--)this.removeListener(t,n[o]);return this},l.prototype.listeners=function(t){return p(this,t,!0)},l.prototype.rawListeners=function(t){return p(this,t,!1)},l.listenerCount=function(t,n){return"function"==typeof t.listenerCount?t.listenerCount(n):m.call(t,n)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};class v extends i{constructor(t){super(),this.enableLogging=t}command(t){return t+"\r\n"}cmdOp(t,n,i=null){let o=`${t},${n}`;if(null!=i&&i.length>0)for(let t=0;t<i.length;t++)null!=i[t]&&(o=`${o},${i[t]}`);return this.command(o)}cmdQueryValue(t){return this.cmdOp(t,"?")}cmdSetValue(t,n,i=null){return this.cmdOp(t,"=",[n,i])}cmdQueryDetails(t=this.Wildcard,n=0,i=65535){return t||(t=this.Wildcard),this.cmdOp(t,"#",[n,i])}cmdRespondDetails(t,n){return this.cmdOp(t,"#",[n])}cmdPulse(t,n){return this.cmdOp(t,"~",[n])}cmdToggle(t,n){return this.cmdOp(t,"!",[n])}cmdInc(t,n){return this.cmdOp(t,"+",[n])}cmdDec(t,n){return this.cmdOp(t,"-",[n])}parseMessage(t){try{let n=t.split(",");if(n.length<2){console.log("[Codec] Invalid length:",n);return}let i=n[0];switch(n[1]){case".":this.emit("keepalive");break;case"#":{let t={};if(n.length>=3)for(let i=2;i<n.length;i++){let o=n[i],r=o.split("=");r.length>=2&&(t[r[0]]=r[1])}this.emit("details",i,t)}break;case"=":n.length>=3?this.emit("value",i,n[2]):this.emit("error","ERR_MISSING_ARGS",e)}}catch(t){this._OnError&&this._OnError("ERR_EXECPTION",t)}}parseString(t){let n=t.split("\r\n");for(let t of n)t.length<=0||this.parseMessage(t)}}var y={};y=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},n=function(t){for(var n="",i=0;i<t.length;++i)n+=String.fromCharCode(t[i]);return n};class w extends i{constructor(t){super(),this.url=t.url,this.bin=t.bin,this.enableLogging=t.enableLogging,this.isBrowser="undefined"!=typeof window,this.enabled=!1}isClosed(){return!!this.wsock&&(this.isBrowser?this.wsock.readyState!=WebSocket.OPEN:this.wsock.readyState!=y.OPEN)}send(t){console.log("[WS] send: ",t),this.isClosed()&&console.log("[WS] ERROR: Closed, cannot send."),this.wsock.send(t,{binary:this.isBin})}enable(){this.enabled=!0,this.isBrowser?this.initForBrowser():this.initForNode()}initForNode(){let t=this;t.wsock=new y(t.url),t.wsock.on("open",()=>{t.emit("connect")}),t.wsock.on("close",()=>{t.emit("close")}),t.wsock.on("error",n=>{t.enableLogging&&console.log("[WS-Node] Error",n),t.emit("error",n)}),t.wsock.on("message",(i,o)=>{if(t.enableLogging&&console.log("[WS] RX:",i),o){t.emit("data",n(i));return}t.emit("data",i)})}initForBrowser(){let t=this;t.enableLogging&&console.log("[WS-Browser] ","Init websocket for browser:",t.url);let n=new WebSocket(t.url);n.onopen=function(n){t.emit("connect")},n.onmessage=function(n){t.emit("message",n.data)},n.onclose=function(n){t.emit("close")},n.onerror=function(n,i){t.emit("error",i)},t.wsock=n}disable(){this.enabled=!1,this.wsock.close()}}var L={};class C extends i{constructor(t){super(),this.host=t.hostname,this.port=t.port,this.enableLogging=t.enableLogging}isClosed(){return!this.socket||this.socket.closed}send(t){this.isClosed()&&this.enableLogging&&console.log("Closed, cannot send."),this.socket.write(t)}enable(){let t=this;t.socket=new L.Socket,t.socket.on("data",i=>{let o=n(i);console.log(o),t.emit("message",o)}),t.socket.on("close",()=>{t.emit("close"),t.socket.destroy()}),t.socket.on("connect",()=>{t.emit("connect")}),t.socket.on("error",t=>{console.log("Error:",t)}),console.log("Connecting to ",t.host,t.port),t.socket.connect(t.port,t.host)}disable(){this.socket&&this.socket.destroy()}}class O extends i{constructor(t){var n;super(),console.log("[Client] Client Options:",t);let i=this;i.options=t,i.enableLogging=t.enableLogging,i.autoReconnect=t.autoReconnect,i.running=!1,i.codec=(n=t.enableLogging,new v(n)),i.codec.on("error",t=>{i.emit("error",t)}),i.codec.on("keepalive",()=>{i.emit("keepalive")}),i.codec.on("details",(t,n)=>{i.emit("details",t,n)}),i.codec.on("value",(t,n)=>{i.emit("value",t,n)}),i.transport=i.newTransportFromURL(t.url,t.enableLogging),i.transport.on("message",t=>{i.codec.parseString(t)}),i.transport.on("close",()=>{i.transport.disable(),i.autoReconnect&&i.running&&setTimeout(()=>{i.transport.enable()},5e3),i.emit("close")}),i.transport.on("connect",()=>{i.options.enableLogging&&console.log("[Client] Connected"),i.emit("connect")}),i.transport.on("error",t=>{console.log("[Client]:",t),i.emit("error",t)})}newTransportFromURL(t,n){var i;let o=new URL(t);return"tcp:"==o.protocol?(i={hostname:o.hostname,port:o.port,enableLogging:n},new C(i)):"ws:"==o.protocol||"wss:"==o.protocol?new w({url:t,enableLogging:n,bin:!0}):void 0}isConnected(){return this.running&&this.transport&&!this.transport.isClosed()}start(){this.running=!0,this.transport.enable()}stop(){this.running=!1,this.transport.disable()}send(t){if(this.transport.isClosed()){console.log("[Client] ERROR: Transport closed, cannot send.");return}this.options.enableLogging&&console.log("[Client] C->S: ",t),this.transport.send(t)}queryDetails(t,n,i){this.send(this.codec.cmdQueryDetails(t,n,i))}queryValue(t){this.send(this.codec.cmdQueryValue(t))}set(t,n){this.send(this.codec.cmdSetValue(t,`${n}`))}inc(t,n){this.send(this.codec.cmdInc(t,`${n}`))}dec(t,n){this.send(this.codec.cmdDec(t,`${n}`))}toggle(t,n=0){this.send(this.codec.cmdToggle(t,`${n}`))}pulse(t,n=0){this.send(this.codec.cmdPulse(t,`${n}`))}setRGBWP(t,n,i,o,r,s){this.set(t,`${n||""}:${i||""}:${o||""}:${r||""}:${s||""}`)}}const P="Switch",k="Slider",T="RGBW",S="Trigger",W="rgbw-dim",$="rgbw-white",R="tw-dim",B="tw-tc";function E(t){return(t/256+1/512).toString(16).substring(2,4)}function x(t){return Math.round(65534*t/255)}function A(t){return t?Math.round(255*parseInt(t)/65534):null}String.prototype.htmlColourToRGB=function(){let t=this.replace("#","").match(/.{1,2}/g);return{R:x(parseInt(t[0],16)),G:x(parseInt(t[1],16)),B:x(parseInt(t[2],16))}},String.prototype.toRGBWP=function(){let t=this.split(":"),n={R:t[0],G:t[1],B:t[2],W:t[3],P:t[4]};return n.Colour="#"+E(A(n.R))+E(A(n.G))+E(A(n.B)),n},String.prototype.toTW=function(){let t=this.split(":");return{TC:t[0],P:t[1]}},String.prototype.formatPercentage=function(){if(this=="")return"...";let t=Math.round(parseInt(this,10));return 65535==t?"":Math.round(100*t/65534).toString()+"%"},String.prototype.formatByte=function(){let t=Math.round(parseInt(this,10));return 65535==t?"":Math.round(255*t/65534).toString()},String.prototype.formatRGBW=function(){let t=this.split(":");return 5==t.length?"R="+t[0].formatByte()+", G="+t[1].formatByte()+", B="+t[2].formatByte()+", W="+t[3].formatByte()+", Dim="+t[4].formatPercentage():str},String.prototype.formatTW=function(){let t=this.split(":");return 2==t.length?"CCT="+t[0].formatPercentage()+", Dim="+t[1].formatPercentage():this},String.prototype.formatOnOff=function(){return this=="0"||this==""?"Off":"On"},window.app=new class{constructor(t){this.client=null,this.tbObjects=document.getElementById("objects"),this.numOfObjectsExpected=0,this.objects=[],this.enableLogging=t,this.pagination={numPerPage:50,curPage:0,numOfPages:1},this.summary=null}getUrl(){return document.getElementById("url").value}getNumPerPage(){let t=document.getElementById("num-obj-per-page").value;return"All"==t&&(t=1e4),t}updatePagination(){let t=this.getNumPerPage(),n=Math.round(this.summary.TOTAL/t);n<=1&&(n=1),t<=1&&(t=1),this.pagination.numOfPages=n,this.pagination.numPerPage=t,this.pagination.curPage>=this.pagination.numOfPages&&(this.pagination.curPage=0),console.log("Pagination:",this.pagination),document.getElementById("page_summary").innerText=this.pagination.curPage+1+"/"+this.pagination.numOfPages}updateSummary(t){console.log("Update Summary:",t),this.summary=t,document.getElementById("summary").innerText=t.NUM+" objects loaded.",this.numOfObjectsExpected=parseInt(t.NUM),this.clearObjects(),this.updatePagination()}updateValue(t,n){let i='[s4i-id="'+t+'"]',o=document.querySelectorAll(i),r=null,s=null;for(let l of(t.endsWith("/RGBW")&&(r=n.toRGBWP()),t.endsWith("/TW")&&(s=n.toTW()),this.enableLogging&&console.log("[App]updateValue:",t,n,r,i,o,typeof n),o)){let t=l.getAttribute("s4i-ui");if("LABEL"==l.nodeName)switch(t){case k:l.innerText=n.formatPercentage();break;case T:l.innerText=n.formatRGBW();break;case P:l.innerText=n.formatOnOff();break;case S:l.innerText="No Value";break;case"TW":l.innerText=n.formatTW();break;default:l.innerText=n}else switch(t){case k:switch(l.getAttribute("s4i-slider")){case W:l.value=r.P;break;case $:l.value=r.W;break;case R:l.value=s.P;break;case B:l.value=s.TC;break;case"dim":l.value=parseInt(n)}break;case T:let i=n.toRGBWP().Colour;i&&(l.value=i);break;case P:l.checked="On"==n.formatOnOff();break;default:l.innerText=n}}}getObjectUI(t,n){return"Auto"!=n.UI?n.UI:t.endsWith("/RGBW")?T:t.endsWith("/VAL")?k:t.endsWith("/SW")?P:t.endsWith("/TRIG")?S:t.endsWith("/TW")?"TW":t.endsWith("/STATUS")?"Label":k}addObject(t,n){let i=parseInt(n.I),o={id:t,index:i,label:n.LBL,percentage:n.P,value:n.V};o.ui=this.getObjectUI(t,n),this.objects.push(o),i>=this.numOfObjectsExpected-1&&this.loadObjects(this.objects)}isConnected(){return this.client&&this.client.isConnected()}setAllValue(t){let n=0;for(let i of this.objects)++n>=50&&(n=0,console.log("Begin Delay...."),console.log("End Delay....")),i.id.endsWith("/VAL")&&this.client.set(i.id,t),i.id.endsWith("/RGBW")&&this.client.set(i.id,"::::"+t),i.id.endsWith("/TW")&&this.client.set(i.id,":"+t)}allOn(){this.setAllValue(65534)}allOff(){this.setAllValue(0)}connect(){var t;this.client&&(this.enableLogging&&console.log("[App]Stopping previous connection..."),this.client.stop());let n=(t={url:this.getUrl(),autoReconnect:!0,enableLogging:!0},new O(t));this.enableLogging&&console.log("[App]Connecting..."),n.on("keepalive",()=>{this.enableLogging&&console.log("[App]S->C keepalive")}),n.on("error",(t,n)=>{this.enableLogging&&console.log("[App]Connection error:",t,n),document.getElementById("status").innerText=t}),n.on("details",(t,n)=>{this.enableLogging&&console.log("[App]S->C details: "+t+",#,"+JSON.stringify(n)),t.includes("*")?this.updateSummary(n):this.addObject(t,n)}),n.on("value",(t,n)=>{this.enableLogging&&console.log("[App]S->C value: "+t+",=,"+n),this.updateValue(t,n)}),n.on("connect",()=>{this.enableLogging&&console.log("[App]XAPI client connected");let t=document.getElementById("status");t.classList.add("connected"),t.classList.remove("disconnected"),t.innerText="Connected"}),n.on("close",()=>{this.enableLogging&&console.log("[App]XAPI client closed");let t=document.getElementById("status");t.classList.remove("connected"),t.classList.add("disconnected"),t.innerText="Disconnected"}),this.client=n,this.client.start()}disconnect(){this.enableLogging&&console.log("[App]Disconnect"),this.client&&this.client.stop()}query(){if(!this.isConnected()){alert("Not connected");return}this.clearObjects();let t=this.getNumPerPage();this.pagination.numPerPage!=t&&(this.pagination.curPage=0),this.pagination.numPerPage=t,this.pagination.curPage>=this.pagination.numOfPages&&(this.pagination.curPage=0),this.client.queryDetails(document.getElementById("query").value,this.pagination.curPage*this.pagination.numPerPage,this.pagination.numPerPage)}rgbwToColour(t){return"#00FF00"}sliderHtml(t,n,i="dim"){let o="";return i&&(o=`s4i-slider="${i}"`),`<label align="center">${n}</label>
                <input type="range"                
                 s4i-id="${t.id}" 
                 ${o}
                 s4i-ui="${k}"
                 min="0" max="65534"/>`}colourHtml(t,n){return`<label align="center">${n}</label>
                <input class="rgbw" type="color" 
                s4i-id="${t.id}" 
                value="${this.rgbwToColour(t.value)}" 
                s4i-ui="${T}"/>`}rgbwHtml(t){return`<div>
            ${this.sliderHtml(t,"Dim",W)}                        
            ${this.sliderHtml(t,"White",$)}                        
            ${this.colourHtml(t,"Colour")}
                 </div>`}tcHtml(t){return t.value,`<input type="range"
                 s4i-id="${t.id}" 
                 value="${t.value}" 
                 s4i-ui="${t.ui} 
                 min="0" max="65534"/>`}twHtml(t){return`<div>
        ${this.sliderHtml(t,"Dim",R)}                        
        ${this.sliderHtml(t,"Colour Temp",B)}
        </div>`}swHtml(t){return parseInt(t.percentage),`<input type="checkbox" 
            role="switch" 
            s4i-id="${t.id}" 
            s4i-ui="${t.ui}"/>`}trigHtml(t){return`<input type="button" 
            role="button" 
            s4i-id="${t.id}" 
            s4i-ui="${t.ui}"
            value="Activate"/>`}labelHtml(t){return`<label 
            s4i-id="${t.id}"
            s4i-ui="${t.ui}">${t.value}</label>`}handleSwitchClick(t){let n=app;if(!n.isConnected()){console.log("Not connected");return}let i=t.srcElement;this.enableLogging&&console.log("handleSwitchClick:",t),console.log("handleSwitchClick:",i,i.checked);let o=i.getAttribute("s4i-id");i.getAttribute("s4i-ui")===P&&n.client.toggle(o)}handleTriggerClick(t){let n=app;if(!n.isConnected()){console.log("Not connected");return}let i=t.srcElement;this.enableLogging&&console.log("handleTriggerClick:",t),console.log("handleTriggerClick:",i,i.checked);let o=i.getAttribute("s4i-id");i.getAttribute("s4i-ui")===S&&n.client.pulse(o)}handleSliderChange(t){let n=app;if(!n.isConnected()){console.log("Not connected");return}let i=t.srcElement;this.enableLogging&&console.log("handleSliderChange:",i);let o=i.getAttribute("s4i-id"),r=i.getAttribute("s4i-slider");if(o.endsWith("/RGBW")){if(r==$){n.client.set(o,`:::${i.value}:`);return}r==W&&n.client.set(o,`::::${i.value}`);return}if(o.endsWith("/TW")){if(r==B){n.client.set(o,`${i.value}:`);return}if(r==R){n.client.set(o,`:${i.value}`);return}}if("dim"==r){n.client.set(o,`${i.value}`);return}}handleRGBWColourChange(t){let n=app;if(!n.isConnected()){console.log("Not connected");return}let i=t.srcElement;this.enableLogging&&console.log("handleRGBWColourChange:",t,i,i.value);let o=i.getAttribute("s4i-id"),r=i.value.htmlColourToRGB();n.client&&n.client.setRGBWP(o,`${r.R}`,`${r.G}`,`${r.B}`)}objectHtml(t){let n="N/A";switch(t.ui){case T:n=this.rgbwHtml(t);break;case"TW":n=this.twHtml(t);break;case P:n=this.swHtml(t);break;case S:n=this.trigHtml(t);break;case k:n=this.sliderHtml(t,"Dim","dim")}return`<tr>
                <td>${t.index}</td>
                <td>${t.id}</td>
                <td>${t.label}</td>
                <td>${this.labelHtml(t)}</td>
                <td>${n}</td>
            </tr>`}clearObjects(){this.objects=[],this.tbObjects.innerHTML=""}loadObjects(t){let n=`
        <thead>
            <tr>
                <th>Index</th>
                <th>ID</th>
                <th>Label</th>
                <th>Value</th>
                <th>Control</th>
            </tr>
        <thead>
        <tbody>`;for(let i=0;i<t.length;i++){let o=t[i];n+=this.objectHtml(o)}for(let i of(n+="</tbody>",this.tbObjects.innerHTML=n,t))this.updateValue(i.id,i.value);let i=document.querySelectorAll(`[s4i-ui=${k}]`);for(let t of i)"INPUT"==t.nodeName&&this.on(t,"change",this.handleSliderChange);for(let t of i=document.querySelectorAll(`[s4i-ui=${P}]`))"INPUT"==t.nodeName&&this.on(t,"click",this.handleSwitchClick);for(let t of i=document.querySelectorAll(`[s4i-ui=${S}]`))"INPUT"==t.nodeName&&this.on(t,"click",this.handleTriggerClick);for(let t of i=document.querySelectorAll(`[s4i-ui=${T}]`))"INPUT"==t.nodeName&&this.on(t,"change",this.handleRGBWColourChange)}setPage(t){console.log("setPage:",t),t>=this.pagination.numOfPages-1&&(t=this.pagination.numOfPages-1),t<0&&(t=0),this.pagination.curPage=t,this.query()}on(t,n,i){let o=t;("string"!=typeof t||(o=document.getElementById(t)))&&o.addEventListener(n,i)}init(){let t=this;document.getElementById("url").value="ws://"+window.location.hostname+":15001",t.on("btn-start","click",()=>{t.connect()}),t.on("btn-prev","click",n=>{n.preventDefault(),t.setPage(t.pagination.curPage-1)}),t.on("btn-next","click",n=>{n.preventDefault(),t.setPage(t.pagination.curPage+1)}),t.on("btn-stop","click",()=>{t.disconnect()}),t.on("btn-query","click",()=>{t.query()}),t.on("btn-all-on","click",()=>{t.allOn()}),t.on("btn-all-off","click",()=>{t.allOff()})}start(){this.client.start()}demo(){this.loadObjects([{id:"1/xapi/1/RGBW",index:0,label:"Demo/RGBW",value:"0:65534:0:0:0",ui:"RGBW"},{id:"1/xapi/2/TW",index:1,label:"Demo/TW",value:"0:32768",ui:"TW"},{id:"1/xapi/3",index:2,label:"Demo/Beamer",percentage:100,value:"65534",ui:"Slider"},{id:"1/xapi/4",index:3,label:"Demo/Sphere",percentage:100,value:"65534",ui:"Slider"}])}},window.app.init();
//# sourceMappingURL=index.1a0bf209.js.map
